#ifndef _MALI_C71_REG_H_
#define _MALI_C71_REG_H_

#define __PACK4(b0, b1, b2, b3) \
	(((b0) & 0xff) << 0 | ((b1) & 0xff) << 8 | ((b2) & 0xff) << 16 | \
	 ((b3) & 0xff) << 24)
#define __PACK4_IDENTICAL(b) \
	__PACK4(b, b, b, b)

/* Pipeline Frontend Registers */
#define C71_REG_PIPE_FE_HIST1_SWITCH	0x10
#define C71_REG_PIPE_FE_HIST1_SWITCH_ISP_PIPE_TAP1	2

/* Interrupt Registers */
#define C71_REG_FE_IRQ_CONTROL		0x80
#define C71_REG_FE_IRQ_FRAME_START_MASK	0x84
#define C71_REG_FE_IRQ_FRAME_START_STS	0x88
#define C71_REG_FE_IRQ_FRAME_START_CLR	0x8c
#define C71_REG_FE_IRQ_FRAME_START_L0	0x90
#define C71_REG_FE_IRQ_FRAME_START_L1	0x94
#define C71_REG_FE_IRQ_FRAME_END_MASK	0x98
#define C71_REG_FE_IRQ_FRAME_END_STS	0x9c
#define C71_REG_FE_IRQ_FRAME_END_CLR	0xa0
#define C71_REG_FE_IRQ_FRAME_END_L0	0xa4
#define C71_REG_FE_IRQ_FRAME_END_L1	0xa8
#define C71_REG_FE_IRQ_STATS		0xac
#define C71_REG_FE_IRQ_STATS_MASK	0xb0
#define C71_REG_FE_IRQ_STATS_STS	0xb4
#define C71_REG_FE_IRQ_STATS_CLR	0xb8
#define C71_REG_FE_IRQ_STATS_L0		0xbc
#define C71_REG_FE_IRQ_STATS_L1		0xc0
#define C71_REG_FE_IRQ_MCFE		0xc4

#define C71_REG_FE_IRQ_MCFE_SLOT_MASK	0xffff0
#define C71_REG_FE_IRQ_MCFE_SLOT_SHIFT	4

#define C71_REG_FE_IRQ_MCFE_MASK	0xc8
#define C71_REG_FE_IRQ_MCFE_MASK_SLOTS_SHIFT	4

#define C71_REG_FE_IRQ_MCFE_STS		0xcc
#define C71_REG_FE_IRQ_MCFE_CLR		0xd0
#define C71_REG_FE_IRQ_MCFE_L0		0xd4
#define C71_REG_FE_IRQ_MCFE_L1		0xd8
#define C71_REG_FE_IRQ_TRIGGER		0xdc

/* MCFE Registers */
#define C71_REG_MCFE_FIFO1_WATERMARK	0x404

#define C71_REG_MCFE_FIFO1_WATERMARK_LOW_MASK		0xffff
#define C71_REG_MCFE_FIFO1_WATERMARK_LOW_SHIFT		0
#define C71_REG_MCFE_FIFO1_WATERMARK_HIGH_MASK		0xffff0000u
#define C71_REG_MCFE_FIFO1_WATERMARK_HIGH_SHIFT		16

#define C71_REG_MCFE_SCHEDULER_MODE	0x414
#define C71_REG_MCFE_SCHEDULER_MODE_MANUAL	0x01

#define C71_REG_MCFE_SCHEDULER_STATUS	0x41c
#define C71_REG_MCFE_START_SLOT		0x418
#define C71_REG_MCFE_START_SLOT_IDLE	0xff


#define C71_REG_MCFE_SLOT_MODE_0_3	0x430
#define C71_REG_MCFE_SLOT_MODE_4_7	0x434
#define C71_REG_MCFE_SLOT_MODE_8_11	0x438
#define C71_REG_MCFE_SLOT_MODE_12_15	0x43c
#define C71_REG_MCFE_SLOT_MODE_ONESHOT	0x4
#define C71_REG_MCFE_SLOT_MODE_CANCEL	0x6
#define C71_REG_MCFE_SLOT_MODE_ALL_ONESHOT	\
	__PACK4_IDENTICAL(C71_REG_MCFE_SLOT_MODE_ONESHOT)

#define C71_REG_MCFE_SLOT_STATUS_0_3	0x440
#define C71_REG_MCFE_SLOT_STATUS_4_7	0x444
#define C71_REG_MCFE_SLOT_STATUS_8_11	0x448
#define C71_REG_MCFE_SLOT_STATUS_12_15	0x44c
#define C71_REG_MCFE_SLOT_STATUS_MASK	0xf

#define C71_REG_MCFE_SLOT_STATUS_IDLE		0
#define C71_REG_MCFE_SLOT_STATUS_SCHEDULED	1
#define C71_REG_MCFE_SLOT_STATUS_BUF_WAIT	2
#define C71_REG_MCFE_SLOT_STATUS_CDMA_WRITE	3	/* from DRAM to ISP */
#define C71_REG_MCFE_SLOT_STATUS_PROCESSING	4
#define C71_REG_MCFE_SLOT_STATUS_CDMA_READ	5	/* from ISP to DRAM */
#define C71_REG_MCFE_SLOT_STATUS_TIMEWAIT	6
#define C71_REG_MCFE_SLOT_STATUS_PASSTHRU	7
#define C71_REG_MCFE_SLOT_STATUS_ERROR_BIT	8

#define C71_REG_MCFE_SLOT_CFG_VALID_0_3		0x4a0
#define C71_REG_MCFE_SLOT_CFG_VALID_4_7		0x4a4
#define C71_REG_MCFE_SLOT_CFG_VALID_8_11	0x4a8
#define C71_REG_MCFE_SLOT_CFG_VALID_12_15	0x4ac
#define C71_REG_MCFE_SLOT_CFG_VALID		0x1
#define C71_REG_MCFE_SLOT_CFG_ALL_VALID	\
	__PACK4_IDENTICAL(C71_REG_MCFE_SLOT_CFG_VALID)

#define C71_REG_MCFE_SLOT_CFG_AVAIL		0x4b0
#define C71_REG_MCFE_SLOT_CFG_AVAIL_SHIFT	0
#define C71_REG_MCFE_SLOT_CFG_AVAIL_NONE	0x0000

#define C71_REG_MCFE_SLOT_CFG_AVAIL_NOACK_SHIFT	16
#define C71_REG_MCFE_SLOT_CFG_AVAIL_NOACK_ALL	0xffff

#define C71_REG_MCFE_SLOT_CFG_AVAIL_ACK		0x4b4

#define __C71_REG_ARR_ADDR(base, elem_size, idx) \
	((base) + (elem_size) * (idx))
#define __C71_REG_U32ARR_ADDR(base, idx) \
	__C71_REG_ARR_ADDR(base, 0x4, idx)

#define C71_REG_MCFE_SLOT_CFG_BASE_0	0x4c0
#define C71_REG_MCFE_SLOT_CFG_BASE(slot)			\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_CFG_BASE_0, slot)

#define C71_REG_MCFE_SLOT_CFG_SIZE_0	0x500
#define C71_REG_MCFE_SLOT_CFG_SIZE(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_CFG_SIZE_0, slot)

#define C71_REG_MCFE_SLOT_CFG_READ_UNITS_0	0x540
#define C71_REG_MCFE_SLOT_CFG_READ_UNITS(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_CFG_READ_UNITS_0, slot)

#define C71_REG_MCFE_SLOT_CFG_WRITE_UNITS_0	0x580
#define C71_REG_MCFE_SLOT_CFG_WRITE_UNITS(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_CFG_WRITE_UNITS_0, slot)

#define C71_REG_MCFE_SLOT_CFG_NONE		 0
#define C71_REG_MCFE_SLOT_CFG_IRIDIX		(1 << 12)
#define C71_REG_MCFE_SLOT_CFG_FULL_SPACE	(1 << 30)

/* "Unsued" value for slots' input and output buffers */
#define C71_REG_MCFE_SLOT_BUF_UNUSED	0xff
#define C71_REG_MCFE_SLOT_BUFS(buf0, buf1, buf2, buf3) \
	__PACK4(buf0, buf1, buf2, buf3)

#define C71_REG_MCFE_SLOT_INPUTS_0	0x5c0
#define C71_REG_MCFE_SLOT_INPUTS_1	0x5c4
#define C71_REG_MCFE_SLOT_INPUTS_15	0x5fc
#define C71_REG_MCFE_SLOT_INPUTS(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_INPUTS_0, slot)

#define C71_REG_MCFE_SLOT_OUT_BUF1_0	0x600
#define C71_REG_MCFE_SLOT_OUT_BUF1_1	0x604
#define C71_REG_MCFE_SLOT_OUT_BUF1_15	0x63c
#define C71_REG_MCFE_SLOT_OUT_BUF1(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_OUT_BUF1_0, slot)

#define C71_REG_MCFE_SLOT_OUT_BUF2_0	0x640
#define C71_REG_MCFE_SLOT_OUT_BUF2_1	0x644
#define C71_REG_MCFE_SLOT_OUT_BUF2_15	0x67c
#define C71_REG_MCFE_SLOT_OUT_BUF2(slot)	\
	__C71_REG_U32ARR_ADDR(C71_REG_MCFE_SLOT_OUT_BUF2_0, slot)

#define C71_REG_MCFE_INPUT_MODE		0x680
#define C71_REG_MCFE_INPUT_MODE_OFF	0x0
#define C71_REG_MCFE_INPUT_MODE_TDMF	0x3
#define C71_REG_MCFE_INPUT_MODE_VAL(mode0, mode1, mode2, mode3) \
	__PACK4(mode0, mode1, mode2, mode3)

#define C71_REG_MCFE_INPUT_STATUS	0x688

/* MCBE Registers */
#define C71_REG_MCBE_FLOW_CONTROL	0x728
#define C71_REG_MCBE_FLOW_CONTROL_ENABLE 0x1

#define C71_REG_MCBE_FIFO_1_2_WATERMARK	0x72c
#define C71_REG_MCBE_FIFO_1_WATERMARK_SHIFT	0
#define C71_REG_MCBE_FIFO_2_WATERMARK_SHIFT	16
#define C71_REG_MCBE_FIFO_3_4_WATERMARK	0x730


/* offsets shifts and status for both raw and output buffers */
#define C71_REG_OFS_BUF_CONFIG		0x0
#define C71_REG_OFS_BUF_BASE_ADDR	0x4
#define C71_REG_OFS_BUF_LINE_OFFSET	0x8
#define C71_REG_OFS_BUF_ACTIVE_WIDTH	0xc
#define C71_REG_OFS_BUF_ACTIVE_HEIGHT	0x10
#define C71_REG_OFS_BUF_STATUS		0x18

#define C71_REG_BUF_STATUS_EMPTY	0x0
#define C71_REG_BUF_STATUS_FILLED	0x1

#define C71_REG_BUF_VALID_SHIFT		0
#define C71_REG_BUF_DATA_WIDTH_SHIFT	8
#define C71_REG_BUF_MSB_ALIGNMNET_SHIFT	16
#define C71_REG_BUF_CONFIG(valid, data_width, msb_aligned) \
	(valid << C71_REG_BUF_VALID_SHIFT | \
	 data_width << C71_REG_BUF_DATA_WIDTH_SHIFT | \
	 msb_aligned << C71_REG_BUF_MSB_ALIGNMNET_SHIFT)

/* raw_buffers */
#define C71_REG_RAWBUF_CONFIG_0		0x800
#define C71_REG_RAWBUF_BASE_ADDR_0	0x804
#define C71_REG_RAWBUF_LINE_OFFSET_0	0x808
#define C71_REG_RAWBUF_ACTIVE_WIDTH_0	0x80c
#define C71_REG_RAWBUF_ACTIVE_HEIGHT_0	0x810
#define C71_REG_RAWBUF_STATUS_0		0x818

#define C71_REG_RAWBUF_BASE		0x800
#define C71_REG_RAWBUF_OFS		0x20


/* out_buffers */
#define C71_REG_OUTBUF_CONFIG_0		0x1000
#define C71_REG_OUTBUF_BASE_ADDR_0	0x1004
#define C71_REG_OUTBUF_LINE_OFFSET_0	0x1008
#define C71_REG_OUTBUF_ACTIVE_WIDTH_0	0x100c
#define C71_REG_OUTBUF_ACTIVE_HEIGHT_0	0x1010
#define C71_REG_OUTBUF_STATUS_0		0x1018

#define C71_REG_OUTBUF_BASE		0x1000
#define C71_REG_OUTBUF_OFS		0x20

/* ID */
#define C71_REG_ID_API                  0xe000
#define C71_REG_ID_PRODUCT              0xe004
#define C71_REG_ID_VERSION              0xe008
#define C71_REG_ID_REVISION             0xe00c

/* Top */
#define C71_REG_TOP_ACTIVE_WIDTH	0xe010
#define C71_REG_TOP_ACTIVE_HEIGHT	0xe014
#define C71_REG_TOP_CFA_PATTERN		0xe018
#define C71_REG_TOP_CFA_PATTERN_START_SHIFT	0
#define C71_REG_TOP_CFA_PATTERN_START_R		0
#define C71_REG_TOP_CFA_PATTERN_START_GR	1
#define C71_REG_TOP_CFA_PATTERN_START_GB	2
#define C71_REG_TOP_CFA_PATTERN_START_B		3

#define C71_REG_TOP_CFA_PATTERN_SELECT_SHIFT	8
#define C71_REG_TOP_CFA_PATTERN_RGGB	0
#define C71_REG_TOP_CFA_PATTERN_RCCC	1
#define C71_REG_TOP_CFA_PATTERN_RlrGB	2
#define C71_REG_TOP_CFA_PATTERN_RGlrB	3

/* Pipeline */
#define C71_REG_PIPELINE_BYPASS		0xe040
#define C71_REG_PIPELINE_BYPASS_TEST_GEN        (1 << 4)
#define C71_REG_PIPLEINE_BYPASS_FRAME_STITCH    (1 << 7)
#define C71_REG_PIPELINE_BYPASS_FS_CHANNEL_SW   (1 << 11)
#define C71_REG_PIPELINE_BYPASS_GAMMA_BE_SQ     (1 << 14)


/* Output formatter */
#define C71_REG_OUTFMT_BYPASS		0xe600
#define C71_REG_OUTFMT_BYPASS_CLIP_RGB          (1 << 0)
#define C71_REG_OUTFMT_BYPASS_LUT_RGB           (1 << 3)
#define C71_REG_OUTFMT_BYPASS_RGB2RGB           (1 << 7)

/* Out format MUXes */
#define C71_REG_OUTMUX_AXI1_MODE	0xe720
#define C71_REG_OUTMUX_AXI1_DATA_WIDTH	0xe724
#define C71_REG_OUTMUX_AXI2_MODE	0xe728
#define C71_REG_OUTMUX_AXI2_DATA_WIDTH	0xe72c
#define C71_REG_OUTMUX_AXI3_MODE	0xe730
#define C71_REG_OUTMUX_AXI3_DATA_WIDTH	0xe734

#define C71_REG_OUTMUX_MODE_SELECT_SHIFT	0
#define C71_REG_OUTMUX_MODE_YUV_Y_12		4
#define C71_REG_OUTMUX_MODE_YUV_U_12		5
#define C71_REG_OUTMUX_MODE_YUV_V_12		6

#define C71_REG_OUTMUX_MSB_ALIGN_SHIFT		7
#define C71_REG_OUTMUX_MSB_ALIGN_LSB		0
#define C71_REG_OUTMUX_MSB_ALIGN_MSB		1

#define C71_REG_OUTMUX_MODE_WIDTH_SHIFT		8
#define C71_REG_OUTMUX_MODE_WIDTH_YUV		8
#define C71_REG_OUTMUX_MODE(width, alignment, select) \
	(width << C71_REG_OUTMUX_MODE_WIDTH_SHIFT | \
	 alignment << C71_REG_OUTMUX_MSB_ALIGN_SHIFT | \
	 select << C71_REG_OUTMUX_MODE_SELECT_SHIFT)

#endif /* _MALI_C71_REG_H_ */
